"use strict";(()=>{var e={};e.id=415,e.ids=[415],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},5135:(e,r,a)=>{a.r(r),a.d(r,{config:()=>g,default:()=>m,routeModule:()=>v});var s={};a.r(s),a.d(s,{config:()=>p,default:()=>handler});var t=a(1802),n=a(7153),i=a(6249);let o=require("multer");var l=a.n(o);let u=require("fs");var d=a.n(u);let c=l().diskStorage({destination:function(e,r,a){let{count:s}=e.query,t=`public/uploads/${s}/`;d().existsSync(t)||d().mkdirSync(t,{recursive:!0}),a(null,t)},filename:function(e,r,a){r.originalname=Buffer.from(r.originalname,"latin1").toString("utf8"),a(null,r.originalname)}}),f=l()({storage:c});async function handler(e,r){try{if("POST"===e.method)f.single("file")(e,r,async e=>{if(e){console.error("File upload error:",e),r.status(500).json({message:"File upload failed."});return}r.status(200).json({message:"File uploaded successfully."})});else if("GET"===e.method){let{count:a}=e.query;if(!a)return r.status(400).json({message:"Missing count parameter."});let s=`public/uploads/${a}/`;if(!d().existsSync(s))return r.status(404).json({message:"No images found for the given count."});let t=d().readdirSync(s);return r.status(200).json(t)}else r.status(405).json({message:"Method not allowed"})}catch(e){console.error("Error in /api/upload:",e),r.status(500).json({message:"Internal Server Error"})}}let p={api:{externalResolver:!0,bodyParser:!1}},m=(0,i.l)(s,"default"),g=(0,i.l)(s,"config"),v=new t.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/boardupload",pathname:"/api/boardupload",bundlePath:"",filename:""},userland:s})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[222],()=>__webpack_exec__(5135));module.exports=a})();